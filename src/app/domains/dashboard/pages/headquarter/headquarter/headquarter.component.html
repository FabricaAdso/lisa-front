<div class="p-6 bg-gray-100 min-h-screen" >
<h1 class="text-2xl font-bold text-gray-800 mb-6">Sedes</h1>

<div class="flex justify-end mb-4">
<button  (click)="openModal()" 
  class="px-4 py-2 bg-green-500 text-white font-semibold rounded-lg hover:bg-green-600 shadow-md">
  Añadir Nuevo
</button>
</div >


@if (isModalVisible) {
  <app-headquarter-form 
    [headquarter]="headquarter" 
    [isVisible]="isModalVisible"  
    (update)="edit($event)" 
    (create)="create($event)" 
    (cancel)="closeModal()">
  </app-headquarter-form>
}


<nz-table #basicTable [nzData]="headquarters" [nzPageSize]="5">
  <thead>
    <tr >
      <th nzWidth="4%">ID</th>
      <th nzWidth="18%">Nombre</th>
      <th nzWidth="15%">Centro de Formación</th>
      <th nzWidth="15%">Departamento</th>
      <th nzWidth="15%">Municipio</th>
      <th nzWidth="15%">Dirección</th>
      <th nzWidth="10%">Hora de Apertura</th>
      <th nzWidth="10%">Hora de cierre</th>
      <th nzWidth="12%">Acciones</th>
    </tr>
  </thead>
  <tbody>
    @for (item of headquarters; track $index) {
    <tr>
      <td class="px-4 py-3 border-b">{{ item.id }}</td>  
      <td class="px-4 py-3 border-b">{{ item.name }}</td>
      <td class="px-4 py-3 border-b">{{ item.training_center.name}}</td>
      <td class="px-4 py-3 border-b">{{ item.municipality.departament.name }}</td>
      <td class="px-4 py-3 border-b">{{ item.municipality.name }}</td>
      <td class="px-4 py-3 border-b">{{ item.adress }}</td>
      <td class="px-4 py-3 border-b">{{ item.opening_time }}</td>
      <td class="px-4 py-3 border-b">{{ item.closing_time }}</td>
      <td >

        <div class="px-4 py-3  flex items-center space-x-2 h-full">

        <button 
        
        nzType="primary"
        class="px-3 py-1 text-green-600 font-semibold border border-green-500 rounded-lg hover:bg-green-100" 
        (click)="openEdit(item)">
          Edit
        </button>

        <button 
        nz-popconfirm 
        nzPopconfirmTitle="¿Está seguro que desea eliminar?" 
        (nzOnConfirm)="confirm(item.id)"
        (nzOnCancel)="cancel()" 
        nz-button 
        nzType="default" 
        nzDanger 
        class="px-3 py-1 text-red-600 font-semibold border border-red-500 rounded-lg hover:bg-red-100 ml-2"
        >
          Delete
        </button>
      </div>
      

      </td>
    </tr>
    }
  </tbody>
</nz-table>
</div>
<!-- @if (isModalVisible) {
 <app-headquarter-form [isVisible]="isModalVisible" (cancel)="closeModal()"></app-headquarter-form>
} -->
