<nz-modal
  [(nzVisible)]="isVisible"
  nzTitle="Subir Justificación"
  (nzOnCancel)="handleCancel()"
  [nzFooter]="null"
>
  <ng-container *nzModalContent>
    <div class="content">

      <!-- Carga de archivo -->
      <div>
        <div *ngIf="!justification.file_url">
          

        <label for="file-upload" style="display: flex; align-items: center; cursor: pointer;">
          <i nz-icon nzType="upload" style="margin-right: 8px;"></i>
          <span>Seleccionar Archivo</span>
        </label>
        <input
          id="file-upload"
          type="file"
          accept=".pdf"
          (change)="handleFileInput($event)"
          style="display: none;"
        />
        </div>

        <!-- Enlace al archivo cargado (solo se muestra si hay archivo cargado) -->
        <div *ngIf="justification.file_url" style="margin-top: 8px; display: flex; align-items: center;">
          <a
            [href]="justification.file_url"
            target="_blank"
            style="text-decoration: none; color: inherit; display: flex; align-items: center;"
          >
            <i nz-icon nzType="file-pdf" nzTheme="outline" style="color: #d32f2f; margin-right: 8px;"></i>
            <span>{{ justification.file?.name || 'Archivo cargado' }}</span>
          </a>
        </div>
        <p *ngIf="!justification.file_url" style="color: #888; margin-top: 8px;">No hay un archivo cargado.</p>
      </div>

      <!-- Mensaje de error -->
      <p *ngIf="errorMessage" style="color: red; margin-top: 8px;">{{ errorMessage }}</p>

      <!-- Descripción -->
      <div>
        <label for="justificacion">Justificación</label>
        <textarea
          id="justificacion"
          nz-input
          rows="4"
          placeholder="Escriba su motivo aquí..."
          [(ngModel)]="justification.description"
          [disabled]="!!justification.file_url"
          style="width: 100%; margin-top: 8px;">
        </textarea>
      </div>

      <!-- Botones -->
      <div style="margin-top: 16px; text-align: right;">
        <button nz-button nzType="default" (click)="handleCancel()">Cancelar</button>
        <button
          nz-button
          nzType="primary"
          [disabled]="!file || isLoading"
          (click)="handleSubmit()"
        >
          <i *ngIf="isLoading" nz-icon nzType="loading" nzTheme="outline"></i> Enviar
        </button>
      </div>
    </div>
  </ng-container>
</nz-modal>
