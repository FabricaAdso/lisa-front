<section class="flex flex-col items-center">
  <!-- Header -->
  <header class="page-header w-full mt-10 border border-solid border-gray-200 p-4 rounded-lg">
    <div class="title-icon flex items-center justify-center w-full">
      <nz-page-header nzBackIcon [nzGhost]="false" nzSize="large"></nz-page-header>
      <nz-page-header-title class="page-header-title text-center text-sm sm:text-base lg:text-lg">
        An√°lisis y Desarrollo de Software 2774315
      </nz-page-header-title>
    </div>
    <nz-page-header-content>
      <nz-descriptions nzSize="middle" [nzColumn]="2" class="flex flex-col sm:flex-row">
        <nz-descriptions-item nzTitle="L√≠der de ficha">Leidy Mariani Dorado</nz-descriptions-item>
        <nz-descriptions-item nzTitle="Duraci√≥n del programa">06/06/2023 - 06/08/2024</nz-descriptions-item>
        <nz-descriptions-item nzTitle="Sede">Inem</nz-descriptions-item>
        <nz-descriptions-item nzTitle="Ambiente" [nzSpan]="1">{{course_code||'1055'}}</nz-descriptions-item>
        <nz-descriptions-item nzTitle="Vocero de ficha">Juan Andr√©s</nz-descriptions-item>
        <nz-descriptions-item nzTitle="Vocero suplente">Antonio Rodr√≠guez</nz-descriptions-item>
      </nz-descriptions>
    </nz-page-header-content>
  </header>

  <!-- Buttons -->
  <div class="buttons w-4/5 p-4 mt-8 flex justify-end gap-4">
    <button
      nz-button
      nzType="default"
      class="px-3 py-2 border border-gray-300 rounded text-gray-700 hover:bg-[#38A901]"
      (click)="toggleTable()"
    >
      {{ showDefaultTable ? 'Tomar asistencia' : 'Volver a tabla original' }}
    </button>
    <button
      nz-button
      nzType="default"
      class="px-3 py-2 border border-gray-300 rounded text-gray-700 hover:bg-[#38A901]"
      (click)="openModalSession()"
    >
      Sesiones
    </button>
    <app-session-show class="hidden" #sessionShowModal></app-session-show>
    <div
      *ngIf="!showDefaultTable"
      class="button flex gap-4 items-center"
    >
      <button
        nz-button
        nzType="default"
        class="px-3 py-2 border border-gray-300 rounded text-gray-700 hover:bg-[#38A901]"
        (click)="callPrevPage()"
        [disabled]="currentPage === 0"
      >
        Anterior
      </button>
      <button
        nz-button
        nzType="default"
        class="px-3 py-2 border border-gray-300 rounded text-gray-700  hover:bg-[#38A901]"
        (click)="callNextPage()"
        [disabled]="currentPage === Math.ceil(listDAtos.length / tablesPerPage)"
      >
        Siguiente
      </button>
    </div>
  </div>

  <!-- Content -->
  <div class="flex flex-wrap items-center justify-center w-full">
    <!-- Default Table -->
    <ng-container
      *ngIf="showDefaultTable"
      class="flex w-full overflow-x-auto"
    >
      <nz-table
        #basicTable
        [nzData]="listOfData"
        [nzBordered]="true"
        [nzPageSize]="5"
        [nzScroll]="{ y: '300px' }"
        class="table-auto w-[60rem] bg-white border border-gray-200 rounded-lg shadow-sm"
      >
        <thead class="bg-gray-100 text-gray-800 font-medium">
          <tr>
            <th class="p-2">Nombres y Apellidos</th>
            <th class="p-2">Documento</th>
            <th class="p-2">Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr
            *ngFor="let data of basicTable.data; trackBy: trackByKey"
            class="even:bg-gray-50 hover:bg-gray-100"
          >
            <td class="p-2">{{ data.nombre }} {{ data.apellido }}</td>
            <td class="p-2">{{ data.documento }}</td>
            <td class="p-2">
              <button
                nz-button
                nzType="primary"
                class="px-3 py-2 border border-gray-300 rounded text-gray-700  hover:bg-[#38A901]"
                (click)="showModal()"
              >
                Justificaci√≥n
              </button>
            </td>
          </tr>
        </tbody>
      </nz-table>
    </ng-container>

    <!-- Alternate Table -->
     <app-attendance-table #attendanceTable *ngIf="!showDefaultTable">
     </app-attendance-table>
    
  </div>

  <!-- Modal -->
  <nz-modal
    [(nzVisible)]="isVisible"
    nzTitle="Inasistencias"
    class="bg-white rounded-lg shadow-md"
    (nzOnCancel)="handleCancel()"
    (nzOnOk)="handleOk()"
  >
    <ng-container *nzModalContent>
      <div class="modal-content p-6">
        <div class="filter-section flex items-center gap-4 mb-5">
          <button
            nz-button
            nzType="default"
            class="filter-btn flex items-center gap-2 px-3 py-2 border border-gray-300 rounded hover:bg-gray-200"
          >
            <i nz-icon nzType="filter"></i> Filtrar
          </button>
          <div class="filter-date flex items-center gap-2">
            <label for="filter-date" class="text-gray-600">Fecha:</label>
            <input
              nz-input
              type="date"
              id="filter-date"
              class="p-2 border border-gray-300 rounded"
            />
          </div>
          <button
            nz-button
            nzType="primary"
            class="all-btn px-3 py-2 bg-green-600 text-white rounded hover:bg-green-700"
          >
            Todas
          </button>
        </div>
        <div class="attendance-list flex flex-col gap-4">
          <div
            class="attendance-item flex items-center gap-4 p-4 border border-gray-200 rounded-lg bg-gray-100"
          >
            <div
              class="status-indicator w-4 h-4 rounded-full bg-green-500"
            ></div>
            <span class="text-gray-700">
              Fecha: 10/07/2024 Hora: 7:00 - 13:00
            </span>
            <a
              href="#"
              class="action-link text-green-700 hover:underline"
              >üëÅÔ∏è Examinar</a
            >
          </div>
        </div>
      </div>
    </ng-container>
  </nz-modal>
</section>
